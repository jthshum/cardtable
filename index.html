<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
        <script src="js/vendor/pixi.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
        <script>
            var renderer = PIXI.autoDetectRenderer(window.innerWidth,
                                                   window.innerHeight,
                                                   {backgroundColor : 0x119955});
            document.body.appendChild(renderer.view);

            // create the root of the scene graph
            var stage = new PIXI.Container();

            // text
            var basicText = new PIXI.Text('Card Table');
            basicText.x = window.innerWidth/2 - 50;
            basicText.y = 10;

            stage.addChild(basicText);

            // create a texture from an image path
            var texture = PIXI.Texture.fromImage('assets/card.png');

            for (var i = 0; i < 10; i++)
            {
                createCard(Math.floor(Math.random() * 800) , Math.floor(Math.random() * 600));
            }

            animate();

            function createCard(x, y){
                // create a new Sprite using the texture
                var card = new PIXI.Sprite(texture);
                // this button mode will mean the hand cursor appears
                card.buttonMode = true;
                // mouse clicks
                card.interactive = true;
                card
                    // events for drag start
                    .on('mousedown', onDragStart)
                    .on('touchstart', onDragStart)
                    // events for drag end
                    .on('mouseup', onDragEnd)
                    .on('mouseupoutside', onDragEnd)
                    .on('touchend', onDragEnd)
                    .on('touchendoutside', onDragEnd)
                    // events for drag move
                    .on('mousemove', onDragMove)
                    .on('touchmove', onDragMove);

                // center the sprite's anchor point
                card.anchor.set(0.5);

                // move the sprite to its designated position
                card.position.x = x;
                card.position.y = y;
                card.scale.x = 0.05;
                card.scale.y = 0.05;

                stage.addChild(card);
            }
            function animate() {
                requestAnimationFrame(animate);

                // render the container
                renderer.render(stage);
            }

            function onDragStart(event)
            {
                // store a reference to the data
                // the reason for this is because of multitouch
                // we want to track the movement of this particular touch
                this.data = event.data;
                this.alpha = 0.5;
                this.dragging = true;
            }

            function onDragEnd()
            {
                this.alpha = 1;

                this.dragging = false;

                // set the interaction data to null
                this.data = null;
            }

            function onDragMove()
            {
                if (this.dragging)
                {
                    var newPosition = this.data.getLocalPosition(this.parent);
                    this.position.x = newPosition.x;
                    this.position.y = newPosition.y;
                }
            }

            window.onresize = function (event){
                var w = window.innerWidth;
                var h = window.innerHeight;
                //this part resizes the canvas but keeps ratio the same
                renderer.view.style.width = w + "px";
                renderer.view.style.height = h + "px";
                //this part adjusts the ratio
                renderer.resize(w,h);
                //test
                basicText.x = window.innerWidth/2 - 50;
            }
        </script>
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
